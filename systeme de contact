
 #include <stdio.h>
#include <string.h>
int nmr=0;
struct Contacts{
char nom[50];
char nmrTel[50];
char AdressMail[50];
};
struct Contacts  tab[100];

void viderBuff() {
    int c;
    while ((c = getchar()) != '\n' && c != EOF) {}
}
void AfficherContact(){
    for(int i=0;i<nmr;i++){
        printf("les infos de contact%d",i+1);
        printf("le nom :%s\n",tab[i].nom);
        printf("le adressMail:%s\n",tab[i].AdressMail);
        printf("le nmro telephone :%s\n",tab[i].nmrTel);
    }
    
}

void AjouterContact(){
    int stop=1;
    
    do{
        
         printf("ajout de contact %d\n", nmr + 1);

        viderBuff();  

        printf("nom : ");
        fgets(tab[nmr].nom, sizeof(tab[nmr].nom), stdin);
        tab[nmr].nom[strcspn(tab[nmr].nom, "\n")] = '\0';
        viderBuff();

        printf("nmrTel : ");
        fgets(tab[nmr].nmrTel, sizeof(tab[nmr].nmrTel), stdin);
       tab[nmr].nmrTel[strcspn(tab[nmr].nmrTel, "\n")] = '\0';
        viderBuff();

        printf("Adress : ");
        fgets(tab[nmr].AdressMail, sizeof(tab[nmr].AdressMail), stdin);
        tab[nmr].AdressMail[strcspn(tab[nmr].AdressMail, "\n")] = '\0';
        viderBuff();

      

        nmr++;

        printf("Tu veux continuer l'ajout ? (0 = non, 1 = oui) : ");
        scanf("%d", &stop);
        viderBuff();
        

    } while (stop == 1 && nmr < 100);
    if(stop==0)
    AfficherContact();
}
        
        
  
void ModifierContact(){
    char nomsearch[20];
    char nvlTel[20];
    char nvlAdress[20];
    int trouv=0;
    
    printf("entrer la valeur de recherche");
        fgets(nomsearch, sizeof(nomsearch), stdin);
        nomsearch[strcspn(nomsearch, "\n")] = '\0';
        viderBuff();
   
     for(int i=0;i<nmr;i++){
         if (strcmp(nomsearch, tab[i].nom) == 0) {
             trouv=1;
                 printf("oui trouve\n");
            printf("entrer la nouvelle valeur de modification adress mail\n");
                      fgets(nvlAdress, sizeof(nvlAdress), stdin);
                        nvlAdress[strcspn(nvlAdress, "\n")] = '\0';
                        viderBuff();
              
            printf("entrer la  nouvelle valeur de modification  nmrtelephone\n");
                  fgets(nvlTel, sizeof(nvlTel), stdin);
                    nvlTel[strcspn(nvlTel, "\n")] = '\0';
                    viderBuff();
               
                       strcpy(tab[i].AdressMail,nvlAdress);
                        strcpy(tab[i].nmrTel,nvlTel);
             }
             
         }
    if(trouv==1){
          
            printf("bonne modification voilà affichage");
            AfficherContact();
        
    }else{
        printf("non trouve");
    }
     }
void SupprimContact(){
        char nomsearch[20];
        int trouv=0;
         printf("entrer la valeur de recherche");
              fgets(nomsearch, sizeof(nomsearch), stdin);
                nomsearch[strcspn(nomsearch, "\n")] = '\0';
                viderBuff();
           
     for(int i=0;i<nmr;i++){
         if (strcmp(nomsearch, tab[i].nom) == 0) {
                 trouv=1;
                 printf("oui trouve\n");
                 strcpy( tab[i].nom,tab[i+1].nom);
                strcpy( tab[i].AdressMail,tab[i+1].AdressMail);
                strcpy( tab[i].nmrTel,tab[i+1].nmrTel);
                nmr--;
                 break;
            }
             
    }
    if(trouv==1){
       printf("bonne suppression voilà affichage apres suppression");
       AfficherContact();
        
    }else{
        printf("non trouve");
    }
        
    }
    
void Recherch(){
      char nomsearch[20];
      int trouv=0;
    printf("entrer la valeur de recherche");
        fgets(nomsearch, sizeof(nomsearch), stdin);
        nomsearch[strcspn(nomsearch, "\n")] = '\0';
        viderBuff();
    for(int i=0;i<nmr;i++){
        if (strcmp(nomsearch, tab[i].nom) == 0) {
            trouv=1;
                       
            printf("oui trouve\n voilà les infos de contact nmr%d\n",i+1);
                printf("nom");
                printf(" %s",tab[i].nom);
                printf("nmrTel");
                printf("%s",tab[i].nmrTel);
                printf("Adress");
                printf(" %s",tab[i].AdressMail);
        }         
                
    }
    if(trouv==0){
        printf("non trouvé");
       
    }
    
            
    
}

int main() {
      
   
    int nmb;
     int choix;
  
       
    do{
       choix=1;
    printf("choisir le nombre que voud voulez \n 1\t pour ajouter \n 2\t AFFICHER \n 3tMODIFIER\n4supprimer\n5Recherche");
    scanf("%d",&nmb);
    
    switch (nmb) {
    case 1:
        AjouterContact();
        break; 
    case 2:
        AfficherContact();
        break;
    case 3:
        ModifierContact();
        break;
    case 4:
        SupprimContact();
        break;
     case 5:
        Recherch();
        break;
    default:
        printf(" ");
    }
     printf("choisir nombre 1 pour afficher menu 0 pour sortir  ");
    scanf("%d",&choix);
    }while(choix==1);

    
    return 0;

}
