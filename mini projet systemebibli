// Online C compiler to run C program online
#include <stdio.h>
#include <string.h>


    char Titre[100][50];
    char auteur[100][50];
    int quantite[100];
     int prix[100];
      
     int nmb=0;
     int stop=0;
void viderBuff() {
    int c;
    while ((c = getchar()) != '\n' && c != EOF) {}
}
void AfficherLivre(){
    for(int i=0;i<nmb;i++){
         printf(" les infos de livre nmr %d:\n",i+1);
        
        printf("Titre de livre : %s\t ",Titre[i]);
            
        printf("Auteur de livre: %s\t ",auteur[i]);
            
        printf("Quantite de livre nmr :%d\t :",quantite[i]);
            
        printf("prix de livre nmr :%d\t\n",prix[i]);
           
       
    }
}
void AffichernombreT(){
    int s=0;
    printf("le nombre totale en stock des livres est:%d\n",nmb);
     for(int i=0;i<nmb;i++){
         s=s+quantite[i];
        
       
    }
    printf("La somme des livres :%d\t :",s);
    
    
           
       
    }


void AjoutLivre(){
    do{
        printf("ajout de livre %d\n", nmb + 1);

        viderBuff();  // ← AJOUT ICI pour éviter de sauter l’auteur

        printf("Auteur : ");
        fgets(auteur[nmb], sizeof(auteur[nmb]), stdin);
        auteur[nmb][strcspn(auteur[nmb], "\n")] = '\0';

        printf("Titre : ");
        fgets(Titre[nmb], sizeof(Titre[nmb]), stdin);
        Titre[nmb][strcspn(Titre[nmb], "\n")] = '\0';

        printf("quantite : ");
        scanf("%d", &quantite[nmb]);
        viderBuff();

        printf("prix : ");
        scanf("%d", &prix[nmb]);
        viderBuff();

        nmb++;

        printf("Tu veux continuer l'ajout ? (0 = non, 1 = oui) : ");
        scanf("%d", &stop);
        viderBuff();
        

    } while (stop == 1 && nmb < 100);
    if(stop==0)
    AfficherLivre();
}


void ModifLivre(){
    char titre[10] ;
    float Quant;
    int trouv=0;
     printf("entrer le titre que recherche");
            scanf("%s",&titre);
      
    
    
    for(int i=0;i<nmb;i++){
        
        if (strcmp(titre, Titre[i]) == 0) {
            trouv=1;
            
            printf("oui trouve \n");
           
            printf("entrer la valeur modifier");
            scanf("%f",&Quant);
            quantite[i]=Quant;
           
            
        }
        
        
            
    }
        if(trouv==1){
            printf("bien modification");
            AfficherLivre(nmb);
            
            
        }else{
            printf("non trouvé");
            
        }
       
       
    
}
void suppLivre(){
    char titre[10] ;
    
    
     printf("entrer le titre que recherche");
    scanf("%s",&titre);
      
    
    
   
    for(int i=0;i<nmb;i++){
        
        if (strcmp(titre, Titre[i]) == 0) {
            
             printf("oui trouve \n");
                
                    strcpy(Titre[i], Titre[i + 1]);
                    strcpy(auteur[i], auteur[i + 1]);
                    quantite[i] = quantite[i + 1];
                    prix[i] = prix[i + 1];
            

          
             nmb--;
             printf("bonne supp  Voila affichge apreés suppression");
              AfficherLivre();
        }else{
                 printf("non trouve");
        }
        
}}

 
 
 
        





int main() {
    
    int choix;
    int nmb;
  
       
    do{
    printf("choisir le nombre que voud voulez \n 1\t pour ajouter \n 2\t AFFICHER \n 3tMODIFIER\n4supprimer\n5 pourAfficherombr etottale de livre
");
    scanf("%d",&nmb);
    
    switch (nmb) {
    case 1:
        AjoutLivre();
        break; 
    case 2:
        AfficherLivre();
        break;
    case 3:
        ModifLivre();
        break;
    case 4:
        suppLivre();
        break;
     case 5:
        AffichernombreT();
        break;
    default:
        printf(" ");
    }
     printf("choisir nombre 1 pour afficher menu 0 pour sortir  ");
    scanf("%d",&choix);
    }while(choix==1);

    
    return 0;
}

    
  
